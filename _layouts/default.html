<!DOCTYPE html>
<html lang="{% if page.lang == 'he' %}he{% else %}en{% endif %}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | truncatewords: 50 }}">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sand: '#faf9f7',
            stone: '#f5f4f1',
            sea: {
              50: '#f0f7fa',
              100: '#dceef4',
              200: '#b8dce9',
              400: '#6ab0c7',
              600: '#3d8ba6',
              700: '#2d6b82',
            },
            ink: '#1a1a1a',
            muted: '#5c5c5c',
            subtle: '#8a8a8a',
          },
          fontFamily: {
            sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <style>
    html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    body { color: #1a1a1a; line-height: 1.625; }

    /* Post typography */
    .prose-custom h1, .prose-custom h2, .prose-custom h3, .prose-custom h4 {
      color: #1a1a1a;
      font-weight: 600;
    }
    .prose-custom h1 { font-size: 1.5rem; margin-top: 3.5rem; margin-bottom: 1.5rem; }
    .prose-custom h2 { font-size: 1.35rem; margin-top: 3.5rem; margin-bottom: 1.5rem; }
    .prose-custom h3 { font-size: 1.125rem; margin-top: 3rem; margin-bottom: 1.25rem; }
    .prose-custom h4 { font-size: 1rem; margin-top: 2.5rem; margin-bottom: 1rem; font-weight: 600; }
    .prose-custom > h1:first-child,
    .prose-custom > h2:first-child,
    .prose-custom > h3:first-child,
    .prose-custom > div:first-child > h1:first-child,
    .prose-custom > div:first-child > h2:first-child { margin-top: 0; }
    .prose-custom p { margin-bottom: 1.5rem; line-height: 1.8; color: #1a1a1a; }
    .prose-custom ul, .prose-custom ol { margin-bottom: 1.5rem; padding-left: 1.5rem; line-height: 1.8; }
    .prose-custom li { margin-bottom: 0.5rem; }
    .prose-custom a { color: #3d8ba6; text-decoration: underline; text-underline-offset: 2px; }
    .prose-custom a:hover { color: #2d6b82; }
    .prose-custom blockquote { border-left: 2px solid #b8dce9; padding-left: 1.25rem; font-style: italic; color: #5c5c5c; margin: 2rem 0; }
    .prose-custom code { background: #f5f4f1; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.875rem; }
    .prose-custom pre { background: #f5f4f1; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; margin: 1.5rem 0; }
    .prose-custom pre code { background: transparent; padding: 0; }
    .prose-custom strong { font-weight: 600; color: #1a1a1a; }
    .prose-custom hr { border-color: #f5f4f1; margin: 3rem 0; }

    /* RTL support for Hebrew posts - comprehensive */
    .prose-rtl,
    .prose-rtl * {
      direction: rtl !important;
      text-align: right !important;
    }
    .prose-rtl h1,
    .prose-rtl h2,
    .prose-rtl h3,
    .prose-rtl h4,
    .prose-rtl p,
    .prose-rtl li,
    .prose-rtl div {
      direction: rtl !important;
      text-align: right !important;
    }
    .prose-rtl ul,
    .prose-rtl ol {
      padding-right: 1.5rem !important;
      padding-left: 0 !important;
      list-style-position: inside !important;
    }
    .prose-rtl li {
      text-align: right !important;
    }
    .prose-rtl blockquote {
      border-left: none !important;
      border-right: 2px solid #b8dce9 !important;
      padding-left: 0 !important;
      padding-right: 1.25rem !important;
    }
    /* Handle any nested dir="rtl" divs in content */
    .prose-rtl [dir="rtl"],
    .prose-rtl div[dir="rtl"] {
      direction: rtl !important;
      text-align: right !important;
    }
  </style>
</head>
<body class="bg-sand min-h-screen">
  <!-- Navigation -->
  <nav class="border-b border-stone">
    <div class="max-w-2xl mx-auto px-6 py-5">
      <div class="flex items-center justify-between">
        <a href="{{ '/' | relative_url }}" class="text-lg font-medium text-ink hover:text-muted transition-colors">
          {{ site.title }}
        </a>
        <div class="flex gap-8">
          <a href="{{ '/' | relative_url }}" class="text-muted hover:text-ink transition-colors text-sm">Home</a>
          <a href="{{ '/about/' | relative_url }}" class="text-muted hover:text-ink transition-colors text-sm">About</a>
          <a href="{{ '/blog/' | relative_url }}" class="text-muted hover:text-ink transition-colors text-sm">Blog</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-2xl mx-auto px-6 py-16">
    {{ content }}
  </main>

  <!-- Footer -->
  <footer class="border-t border-stone mt-24">
    <div class="max-w-2xl mx-auto px-6 py-8 text-center text-subtle text-sm">
      &copy; {{ 'now' | date: '%Y' }} {{ site.title }}
    </div>
  </footer>
</body>
</html>
